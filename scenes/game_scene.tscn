[gd_scene load_steps=32 format=3 uid="uid://fqhpfxc8csob"]

[ext_resource type="Script" uid="uid://cjmn721f77ha2" path="res://scripts/game.gd" id="1_bw6k5"]
[ext_resource type="PackedScene" uid="uid://c2ji84bo7mt61" path="res://scenes/escaleras.tscn" id="1_onqr8"]
[ext_resource type="PackedScene" uid="uid://dnvwnpc2r1rhl" path="res://scenes/niveles.tscn" id="2_mw25s"]
[ext_resource type="Script" uid="uid://cms7i7o53f5hh" path="res://scripts/recursos/NivelResource.gd" id="3_tqxxy"]
[ext_resource type="PackedScene" uid="uid://7auvomxkllwa" path="res://scenes/spawn.tscn" id="3_ycayy"]
[ext_resource type="PackedScene" uid="uid://1ga6ufyqjdpg" path="res://scenes/spawn_controller.tscn" id="4_utbpp"]
[ext_resource type="Script" uid="uid://ccaf80ghnyu68" path="res://scripts/jugador.gd" id="5_5ay1a"]
[ext_resource type="Texture2D" uid="uid://5k4d1tkogqaw" path="res://images/Prota-spritesheet.png" id="6_ldkr4"]
[ext_resource type="PackedScene" uid="uid://dpnj3vojdm5v2" path="res://scenes/obstaculos/desc_vecino_y_mascota.tscn" id="8_rvs2r"]
[ext_resource type="PackedScene" uid="uid://cv705y01obmlf" path="res://scenes/obstaculos/desc_vecino_dibujo.tscn" id="9_5ay1a"]
[ext_resource type="PackedScene" uid="uid://dhy8gr8gs1f10" path="res://scenes/obstaculos/asc_vecino_y_mascota.tscn" id="9_tqxxy"]
[ext_resource type="PackedScene" uid="uid://btv867av8wwp8" path="res://scenes/obstaculos/desc_gatete.tscn" id="10_ldkr4"]
[ext_resource type="Script" uid="uid://d5cmtqt47mye" path="res://addons/transitionmanager/trans_mgr.gd" id="10_tcjrq"]
[ext_resource type="PackedScene" uid="uid://da23cebour86w" path="res://scenes/obstaculos/asc_vecino_normal.tscn" id="10_tqxxy"]
[ext_resource type="PackedScene" uid="uid://bry00ywvtt5km" path="res://scenes/obstaculos/asc_vecinas_blabla.tscn" id="11_ldkr4"]
[ext_resource type="PackedScene" uid="uid://cmvvmnv37bmya" path="res://scenes/transicion/transition_scene.tscn" id="11_rvs2r"]
[ext_resource type="Script" uid="uid://btdc8ta42w1bt" path="res://scripts/menu/pause_menu.gd" id="17_77hjl"]
[ext_resource type="Theme" uid="uid://cjq5vt88wa8x" path="res://ui/menu_theme.tres" id="18_6aqbo"]
[ext_resource type="PackedScene" uid="uid://boqjwieb36yip" path="res://scenes/menus/settings_menu.tscn" id="18_ro0ie"]
[ext_resource type="Script" uid="uid://dk6qgiud5ogi5" path="res://addons/navigationbutton/nav_btn.gd" id="19_ro0ie"]

[sub_resource type="Resource" id="Resource_5ay1a"]
script = ExtResource("3_tqxxy")
duracion = 15.0
numSpawns = 1
intervaloSpawns = 5.0
multVelocidad = 1.0
metadata/_custom_type_script = "uid://cms7i7o53f5hh"

[sub_resource type="Resource" id="Resource_tqxxy"]
script = ExtResource("3_tqxxy")
duracion = 15.0
numSpawns = 1
intervaloSpawns = 3.0
multVelocidad = 1.2
metadata/_custom_type_script = "uid://cms7i7o53f5hh"

[sub_resource type="Resource" id="Resource_ldkr4"]
script = ExtResource("3_tqxxy")
duracion = 15.0
numSpawns = 3
intervaloSpawns = 5.0
multVelocidad = 1.2
metadata/_custom_type_script = "uid://cms7i7o53f5hh"

[sub_resource type="AtlasTexture" id="AtlasTexture_28edd"]
atlas = ExtResource("6_ldkr4")
region = Rect2(0, 0, 548, 798)

[sub_resource type="AtlasTexture" id="AtlasTexture_k64kw"]
atlas = ExtResource("6_ldkr4")
region = Rect2(548, 0, 548, 798)

[sub_resource type="AtlasTexture" id="AtlasTexture_qimn5"]
atlas = ExtResource("6_ldkr4")
region = Rect2(1096, 0, 548, 798)

[sub_resource type="AtlasTexture" id="AtlasTexture_gynwn"]
atlas = ExtResource("6_ldkr4")
region = Rect2(1644, 0, 548, 798)

[sub_resource type="AtlasTexture" id="AtlasTexture_xm55e"]
atlas = ExtResource("6_ldkr4")
region = Rect2(2192, 0, 548, 798)

[sub_resource type="AtlasTexture" id="AtlasTexture_qimqe"]
atlas = ExtResource("6_ldkr4")
region = Rect2(2740, 0, 548, 798)

[sub_resource type="SpriteFrames" id="SpriteFrames_l5m57"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_28edd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k64kw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qimn5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gynwn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xm55e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qimqe")
}],
"loop": true,
"name": &"walking",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_e85j5"]
size = Vector2(40, 96)

[node name="GameScene" type="Node2D"]
script = ExtResource("1_bw6k5")

[node name="Niveles" parent="." instance=ExtResource("2_mw25s")]
niveles = Array[ExtResource("3_tqxxy")]([SubResource("Resource_5ay1a"), SubResource("Resource_tqxxy"), SubResource("Resource_ldkr4")])

[node name="Escaleras" parent="." instance=ExtResource("1_onqr8")]

[node name="Jugador" type="CharacterBody2D" parent="."]
position = Vector2(265, 172)
script = ExtResource("5_5ay1a")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Jugador"]
scale = Vector2(0.136861, 0.136861)
sprite_frames = SubResource("SpriteFrames_l5m57")
animation = &"walking"
autoplay = "walking"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Jugador"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_e85j5")
debug_color = Color(0.862745, 0, 0.0941176, 0.172549)

[node name="SpawnController" parent="." instance=ExtResource("4_utbpp")]

[node name="SpawnUL" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(156, -125)
vecinos = Array[PackedScene]([ExtResource("8_rvs2r"), ExtResource("9_5ay1a"), ExtResource("10_ldkr4")])

[node name="SpawnUC" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(260, -150)
vecinos = Array[PackedScene]([ExtResource("8_rvs2r")])

[node name="SpawnUR" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(364, -125)
gizmo_extents = 15.0
vecinos = Array[PackedScene]([ExtResource("10_ldkr4"), ExtResource("9_tqxxy")])

[node name="SpawnDL" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(156, 845)
vecinos = Array[PackedScene]([ExtResource("9_tqxxy"), ExtResource("11_ldkr4")])

[node name="SpawnDC" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(260, 870)
vecinos = Array[PackedScene]([ExtResource("10_tqxxy")])

[node name="SpawnDR" parent="SpawnController" instance=ExtResource("3_ycayy")]
position = Vector2(364, 845)
vecinos = Array[PackedScene]([ExtResource("9_tqxxy")])

[node name="TransitionManager" type="AnimationPlayer" parent="." node_paths=PackedStringArray("transition_scene")]
root_node = NodePath("../Play")
script = ExtResource("10_tcjrq")
has_fadein = true
transition_scene = NodePath("../TransitionScene")
metadata/_custom_type_script = "uid://d5cmtqt47mye"

[node name="PauseMenu" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
theme = ExtResource("18_6aqbo")
script = ExtResource("17_77hjl")
settings_menu = ExtResource("18_ro0ie")

[node name="Background" type="Panel" parent="PauseMenu"]
layout_mode = 1
offset_right = 540.0
offset_bottom = 720.0

[node name="Title" type="Label" parent="PauseMenu"]
layout_mode = 1
offset_right = 540.0
offset_bottom = 172.0
text = "WIN_PAUSE"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Botones" type="VBoxContainer" parent="PauseMenu"]
layout_mode = 0
offset_left = 152.0
offset_top = 319.0
offset_right = 370.0
offset_bottom = 547.0
theme = ExtResource("18_6aqbo")
alignment = 1

[node name="Play" type="Button" parent="PauseMenu/Botones"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 2.0
theme = ExtResource("18_6aqbo")
text = "BUT_RESUME"

[node name="Settings" type="Button" parent="PauseMenu/Botones"]
layout_mode = 2
size_flags_vertical = 3
theme = ExtResource("18_6aqbo")
text = "BUT_SETTINGS"

[node name="Salir" type="Button" parent="PauseMenu/Botones"]
layout_mode = 2
size_flags_vertical = 3
theme = ExtResource("18_6aqbo")
text = "BUT_EXIT"
script = ExtResource("19_ro0ie")
next_scene_path = "res://scenes/menus/main_menu.tscn"
has_transition = true
metadata/_custom_type_script = "uid://dk6qgiud5ogi5"

[node name="TransitionScene" parent="." instance=ExtResource("11_rvs2r")]
offset_right = 540.0
offset_bottom = 720.0
metadata/_edit_use_anchors_ = true

[connection signal="nivel_cambiado" from="Niveles" to="." method="_on_niveles_nivel_cambiado"]
[connection signal="pressed" from="PauseMenu/Botones/Play" to="PauseMenu" method="_on_play_pressed"]
[connection signal="pressed" from="PauseMenu/Botones/Settings" to="PauseMenu" method="_on_settings_pressed"]
